// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  user_id Int @id @default(autoincrement()) @unique
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  email String @unique
  hash String

  professors Professor?

  @@map("users")
}

model Professor {
  nome_prof String 
  cod_prof Int @id @default(autoincrement())
  cod_disciplina Int

  user_id Int @unique
  user User @relation(fields: [user_id], references: [user_id])

  email_prof String?
  tel_prof String

  @@map("professors")
}

model Disciplina {
  cod_disciplina Int @id @default(autoincrement())
  nome_disciplina String 

  @@map("disciplinas")
}

model Aluno {
  cod_aluno Int @id @unique @default(autoincrement())
  cod_turma Int
  cod_resp Int

  nome_aluno String
  data_nasc DateTime 

  @@map("alunos")
}

model Responsavel {
  cod_resp Int 
  cod_aluno Int

  nome_resp String
  tel_resp String?
  email_resp String?

  @@id([cod_resp, cod_aluno])
  @@map("responsaveis")
}

model Turma {
  cod_turma Int @id @default(autoincrement()) @unique

  nome_turma String
  sala_aula Int 

  @@map("turmas")
}

model Periodo {
  cod_periodo Int @id @default(autoincrement()) @unique
  periodo String 

  @@map("periodos")
}

model Aula {
  cod_turma Int
  cod_periodo Int
  cod_prof Int
  cod_disciplina Int

  dia_semana String
  data_aula DateTime

  @@id([cod_turma, cod_periodo, cod_disciplina, dia_semana])
  @@map("aulas")
}

model Presenca {
  cod_aluno Int 
  cod_disciplina Int

  data_presenca DateTime
  status String

  @@id([cod_aluno, cod_disciplina, data_presenca])
  @@map("presencas")
}
